openapi: 3.0.0
info:
  version: 0.1.0
  title: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å±•ç¤ºä¼š
  description: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å±•ç¤ºä¼š ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰APIå®šç¾©
  # NOTE(ryutah): LICENSEã©ã†ã™ã‚‹ï¼Ÿ
  # license:
  #   name: MIT
servers:
  - url: /api

x-constnt:
  maxLength:
    short_string: &max_len_short_string 100
    long_string: &max_len_long_string 1000
    url: &max_len_url 2000
  default:
    page_size: &default_page_size 50
  maximum:
    page_size: &max_page_size 100
  response:
    paging_fields: &response_paging_fields
      total_count:
        type: integer
        description: ç·ä½œå®¶æ•°
        format: int32
        example: 100
      next_page_token:
        type: string
        description: æ¬¡ãƒšãƒ¼ã‚¸å–å¾—ã®ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³
        example: xxxxxxxxxxxxx

paths:
  /artists:
    get:
      summary: ä½œå®¶ä¸€è¦§
      operationId: listArtist
      tags:
        - artists
      parameters:
        - in: query
          name: page_token
          description: |
            ãƒšãƒ¼ã‚¸ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŒ‡å®šã™ã‚‹

            ä¸€è¦§ã‚’å–å¾—ã™ã‚‹éš›ã«ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® `next_page_token` ã®å€¤ã‚’è¨­å®šã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã§
            æ¬¡ã®ãƒšãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
          required: false
          schema:
            type: string
        - in: query
          name: page_size
          description: ä¸€åº¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å–å¾—ã™ã‚‹ãƒªã‚¹ãƒˆã®æ•°ã‚’æŒ‡å®šã™ã‚‹
          schema:
            type: integer
            format: int32
            default: *default_page_size
            maximum: *max_page_size
      responses:
        "200":
          $ref: "#/components/responses/ListArtist"
  /artists/{artist_id}:
    get:
      summary: ä½œå®¶è©³ç´°æƒ…å ±å–å¾—
      operationId: getArtist
      tags:
        - artists
      parameters:
        - in: path
          required: true
          name: artist_id
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/GetArtist"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "500":
          $ref: "#/components/responses/ServerError"

  /artists/{artist_id}/artofworks:
    get:
      summary: ä½œå“ä¸€è¦§å–å¾—
      operationId: listArtOfWork
      tags:
        - art_of_works
      parameters:
        - in: path
          required: true
          name: artist_id
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/ListArtOfWork"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  responses:
    ListArtist:
      description: ä½œå®¶ä¸€è¦§
      content:
        application/json:
          schema:
            type: object
            properties:
              artists:
                type: array
                items:
                  $ref: "#/components/schemas/Artist"
              <<: *response_paging_fields
    GetArtist:
      description: artist_idã§æŒ‡å®šã•ã‚ŒãŸä½œå®¶ã®æƒ…å ±
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Artist"
    ListArtOfWork:
      description: ä½œå“ä¸€è¦§
      content:
        application/json:
          schema:
            type: object
            properties:
              art_of_works:
                type: array
                items:
                  $ref: "#/components/schemas/ArtOfWork"
              <<: *response_paging_fields
    NotFoundError:
      description: |
        NotFoundã‚¨ãƒ©ãƒ¼

        ãƒ‘ã‚¹ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„å ´åˆ
        æ¤œç´¢çµæœãŒ0ä»¶ã§ã‚ã‚‹å ´åˆç­‰ã§ã¯404ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ãªã„
        (ãã®å ´åˆã¯ã€ç©ºã®ãƒªã‚¹ãƒˆãŒæˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§è¿”ã•ã‚Œã‚‹)
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    ServerError:
      description: |
        ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

        äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
        ã‚¨ãƒ©ãƒ¼è©³ç´°ã«ã¯ã€å†…éƒ¨çš„ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€
        ç”»é¢ä¸Šã«è¡¨ç¤ºã™ã‚‹ã«ã¯é©ã•ãªã„
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

  schemas:
    Artist:
      type: object
      properties:
        id:
          type: string
          description: ä½œå®¶ID
        profile:
          $ref: "#/components/schemas/ArtistProfile"
        masterpiece:
          $ref: "#/components/schemas/ArtistMasterpiece"
        links:
          nullable: false
          type: array
          items:
            $ref: "#/components/schemas/ArtistLink"
      required:
        - id
        - profile
        - masterpiece

    ArtistProfile:
      type: object
      description: ä½œå®¶æƒ…å ±
      properties:
        avator:
          type: string
          description: ã‚¢ãƒã‚¿ãƒ¼ã®URL
          maxLength: *max_len_url
          format: url
          example: "https://github.com/ryutah.png"
        name:
          type: string
          description: ä½œå®¶å
          maxLength: *max_len_short_string
          example: ryutah
        introduction:
          type: string
          description: ä½œå®¶ç´¹ä»‹
          maxLength: *max_len_long_string
          example: |
            åƒ•ã¯ã™ã”ã„ä½œå®¶ãªã®ã§ã€ã¶ã£ã¡ã‚ƒã‘ã“ã‚“ãªã‚µã‚¤ãƒˆä½¿ã‚ãªãã¦ã‚‚ã©ã†ã¨ã§ã‚‚ãªã‚‹ã®ã§ã™ğŸ˜Š
            è©¦ã—ã«ä½¿ã£ã¦ã¿ã‚ˆã†ã‹ãªã£ã¦ç¨‹åº¦ãªã®ã§ã™ã€‚
      required:
        - name
        - introduction

    ArtistMasterpiece:
      type: object
      description: ä»£è¡¨ä½œ
      properties:
        title:
          type: string
          description: ä½œå“ã‚¿ã‚¤ãƒˆãƒ«
          maxLength: *max_len_short_string
          example: ã»ã’ã»ã’ãµãŒãµãŒ
        url:
          type: string
          description: |
            ä½œå“ã®ç”»åƒURL
            è§£åƒåº¦: 150x150(é©å½“)
          maxLength: *max_len_url
          example: "https://placehold.jp/150x150.png"
      required:
        - title
        - url

    ArtistLink:
      type: object
      description: ãƒªãƒ³ã‚¯æƒ…å ±
      properties:
        url:
          type: string
          description: URL
          maxLength: *max_len_url
          format: url
          example: "https://github.com/ryutah"
        display_name:
          type: string
          description: è¡¨ç¤ºå
          maxLength: *max_len_short_string
          example: "@ryutah"
        icon:
          type: string
          description: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚¤ã‚³ãƒ³ã®URL
          maxLength: *max_len_long_string
          format: url
          example: "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
      required:
        - url
        - display_name

    ArtOfWork:
      type: object
      description: ä½œå“
      properties:
        id:
          type: string
          description: ä½œå“ID
          example: "xxxxxxxxxxxx"
        information:
          $ref: "#/components/schemas/ArtOfWorkInformation"
        display_items:
          $ref: "#/components/schemas/ArtOfWOrkDisplayItem"
      required:
        - information
        - display_items

    ArtOfWorkInformation:
      type: object
      description: ä½œå“è©³ç´°æƒ…å ±
      properties:
        title:
          type: string
          description: ä½œå“ã‚¿ã‚¤ãƒˆãƒ«
          maxLength: *max_len_short_string
          example: ç¾å ´çŒ«
        introduction:
          type: string
          description: ä½œå“ã®ç´¹ä»‹æ–‡
          maxLength: *max_len_long_string
          example: |
            ç¾å ´çŒ«ã¨ã¯ã€æ§˜ã€…ãªç¾å ´ã§ã¯ãŸã‚‰ãçŒ«ãŸã¡ã§ã‚ã‚‹ã€‚ä¾¿å®œä¸Šã€ãã®ã‚‚ã¨ã«ãªã£ãŸã€Œé›»è©±çŒ«ã€ã€ãã—ã¦ç¾å ´çŒ«ã‚’ã‚‚ã¨ã«ã—ã¦ä½œã‚‰ã‚ŒãŸã€Œä»•äº‹çŒ«ã€ã«ã¤ã„ã¦ã‚‚ã“ã“ã§è¿°ã¹ã‚‹ã€‚
            ç¾å ´çŒ«ã®å…ƒã¨ãªã£ãŸç”»åƒã¯ã€ãã¾ã¿ã­æ°ãŒ2016å¹´2015å¹´(2020/08/13è¨‚æ­£)ã«ãƒ„ã‚¤ãƒ¼ãƒˆã—ãŸã€Œãƒã‚³é›»è©±ç›¸è«‡å®¤ã€ãŒåˆå‡ºã€‚çŒ«ãŒå—è©±å™¨ã‚’å–ã‚Šã€ã€Œã©ã†ã—ã¦å¤œä¸­ã«èµ·ãã¦ã‚‹ã‚“ã§ã™ã‹ï¼Ÿã€ã¨è¨€ã£ã¦ã„ã‚‹ç”»åƒã§ã‚ã‚‹ã€‚
      required:
        - title
        - introduction

    ArtOfWOrkDisplayItem:
      type: object
      description: ä½œå“
      properties:
        url:
          type: string
          description: ä½œå“ã®URL
          format: url
          example: "https://user-images.githubusercontent.com/6662577/93331845-e2435f80-f85b-11ea-9a1e-3c3d591e4504.png"
          maxLength: *max_len_url
        mime_type:
          type: string
          description: ä½œå“ã®å½¢å¼
          enum:
            - image/png
            - video/mp4

    # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‚è€ƒ:
    # https://developers.google.com/search-ads/v2/standard-error-responses
    Error:
      type: object
      properties:
        message:
          type: string
          description: >
            ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¦‚è¦
            ç”»é¢ä¸Šã«ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã‚‹
        code:
          type: integer
          format: int32
          description: HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰
          enum: [404, 500]
        errors:
          type: array
          description: ã‚¨ãƒ©ãƒ¼ãƒªã‚¹ãƒˆ
          items:
            $ref: "#/components/schemas/ErrorDetail"
      required:
        - message
        - code
        - errors

    ErrorDetail:
      type: object
      properties:
        reason:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥
          enum:
            - inernal_error
            - not_found
        message:
          description: >
            ã‚¨ãƒ©ãƒ¼ã®è©³ç´°å†…å®¹
            ç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹å½¢å¼ã§æœ‰ã‚‹ã“ã¨ã¯ä¿è¨¼ã•ã‚Œãªã„
          type: string
      required:
        - reason
        - message
