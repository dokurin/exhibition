openapi: 3.0.0
info:
  version: 0.1.0
  title: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å±•ç¤ºä¼š
  description: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å±•ç¤ºä¼š ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰APIå®šç¾©
  # NOTE(ryutah): LICENSEã©ã†ã™ã‚‹ï¼Ÿ
  # license:
  #   name: MIT
servers:
  - url: /api

x-constnt:
  maxLength:
    shortString: &max_len_short_string 100
    longString: &max_len_long_string 1000
    url: &max_len_url 2000
  default:
    pageSize: &default_page_size 50
  maximum:
    pageSize: &max_page_size 100

paths:
  /artists:
    get:
      summary: ä½œå®¶ä¸€è¦§
      operationId: listArtist
      tags:
        - artists
      parameters:
        - in: query
          name: pageToken
          description: |
            ãƒšãƒ¼ã‚¸ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŒ‡å®šã™ã‚‹

            ä¸€è¦§ã‚’å–å¾—ã™ã‚‹éš›ã«ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® `nextPageToken` ã®å€¤ã‚’è¨­å®šã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã§
            æ¬¡ã®ãƒšãƒ¼ã‚¸ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
          required: false
          schema:
            type: string
        - in: query
          name: pageSize
          description: ä¸€åº¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å–å¾—ã™ã‚‹ãƒªã‚¹ãƒˆã®æ•°ã‚’æŒ‡å®šã™ã‚‹
          schema:
            type: integer
            format: int32
            default: *default_page_size
            maximum: *max_page_size
      responses:
        "200":
          $ref: "#/components/responses/ListArtist"

  /helloworld:
    get:
      summary: Hello, World
      operationId: getHelloWorld
      tags:
        - helloworld
      responses:
        "200":
          $ref: "#/components/responses/GetHelloWorld"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  responses:
    ListArtist:
      description: ä½œå®¶ä¸€è¦§
      content:
        application/json:
          schema:
            type: object
            properties:
              artists:
                type: array
                items:
                  $ref: "#/components/schemas/Artist"
              totalCount:
                type: integer
                description: ç·ä½œå®¶æ•°
                format: int32
                example: 100
              nextPageToken:
                type: string
                description: æ¬¡ãƒšãƒ¼ã‚¸å–å¾—ã®ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³
                example: xxxxxxxxxxxxx
    GetHelloWorld:
      description: Hello Worldãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/HelloWorld"
    ServerError:
      description: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

  schemas:
    Artist:
      type: object
      properties:
        id:
          type: string
          description: ä½œå®¶ID
        profile:
          type: object
          description: ä½œå®¶æƒ…å ±
          properties:
            avator:
              type: string
              description: ã‚¢ãƒã‚¿ãƒ¼ã®URL
              maxLength: *max_len_url
              format: url
              example: "https://github.com/ryutah.png"
            name:
              type: string
              description: ä½œå®¶å
              maxLength: *max_len_short_string
              example: ryutah
            introduction:
              type: string
              description: ä½œå®¶ç´¹ä»‹
              maxLength: *max_len_long_string
              example: |
                åƒ•ã¯ã™ã”ã„ä½œå®¶ãªã®ã§ã€ã¶ã£ã¡ã‚ƒã‘ã“ã‚“ãªã‚µã‚¤ãƒˆä½¿ã‚ãªãã¦ã‚‚ã©ã†ã¨ã§ã‚‚ãªã‚‹ã®ã§ã™ğŸ˜Š
                è©¦ã—ã«ä½¿ã£ã¦ã¿ã‚ˆã†ã‹ãªã£ã¦ç¨‹åº¦ãªã®ã§ã™ã€‚
          required:
            - name
            - introduction
        masterpiece:
          type: object
          description: ä»£è¡¨ä½œ
          properties:
            title:
              type: string
              description: ä½œå“ã‚¿ã‚¤ãƒˆãƒ«
              maxLength: *max_len_short_string
              example: ã»ã’ã»ã’ãµãŒãµãŒ
            url:
              type: string
              description: |
                ä½œå“ã®ç”»åƒURL
                è§£åƒåº¦: 150x150(é©å½“)
              maxLength: *max_len_url
              example: "https://placehold.jp/150x150.png"
          required:
            - title
            - url
        links:
          type: array
          items:
            type: object
            description: ãƒªãƒ³ã‚¯æƒ…å ±
            properties:
              url:
                type: string
                description: URL
                maxLength: *max_len_url
                format: url
                example: "https://github.com/ryutah"
              displayName:
                type: string
                description: è¡¨ç¤ºå
                maxLength: *max_len_short_string
                example: "@ryutah"
              icon:
                type: string
                description: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚¤ã‚³ãƒ³ã®URL
                maxLength: *max_len_long_string
                format: url
                example: "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
            required:
              - url
              - displayName
              - links
      required:
        - id
        - profile
        - masterpiece

    HelloWorld:
      type: object
      properties:
        message:
          type: string
          example: "Hello, Worldd!!"
      required:
        - message

    # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‚è€ƒ:
    # https://developers.google.com/search-ads/v2/standard-error-responses
    Error:
      type: object
      properties:
        message:
          type: string
          description: >
            ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¦‚è¦
            ç”»é¢ä¸Šã«ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã‚‹
        code:
          type: integer
          description: HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰
          enum: [500]
        errors:
          type: array
          description: ã‚¨ãƒ©ãƒ¼ãƒªã‚¹ãƒˆ
          items:
            $ref: "#/components/schemas/ErrorDetail"
      required:
        - message
        - code
        - errors

    ErrorDetail:
      type: object
      properties:
        reason:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥
          enum:
            - inernalError
        message:
          description: >
            ã‚¨ãƒ©ãƒ¼ã®è©³ç´°å†…å®¹
            ç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹å½¢å¼ã§æœ‰ã‚‹ã“ã¨ã¯ä¿è¨¼ã•ã‚Œãªã„
          type: string
      required:
        - reason
        - message
